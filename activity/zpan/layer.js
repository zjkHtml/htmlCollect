function Layer(i){this.name=i.name,this.isclick=!0,this.acid=i.acid,this.appos=i.appos,this.appkey=i.appkey,this.business=i.business,this.uid=i.uid,this.di=i.di,this.df=i.df,this.ua=i.ua,this.urlHead="https://buy.bianxianmao.com",this.cont="/award/countInfo",this.data={timeLayer:[{imgUrl:"https://buyimg.bianxianmao.com/dist/activeCenter/banner/123381017.jpg",title:"赢手机抢50元话费了!",buttontxt:"立即领取",linkUrl:"https://buyimg.bianxianmao.com/dist/newwheel/wheel.html?activityid=12338",activityid:12338},{imgUrl:"https://buyimg.bianxianmao.com/dist/activeCenter/banner/123501017.png",title:"10月大红包 不领就亏了",buttontxt:"立即领取",linkUrl:"https://buyimg.bianxianmao.com/dist/eggModel/goldegg.html?activityid=12350",activityid:12350},{imgUrl:"https://buyimg.bianxianmao.com/dist/activeCenter/banner/122461017.jpg",title:"领个红包 吃顿好的",buttontxt:"立即领取",linkUrl:"https://buyimg.bianxianmao.com/dist/awardModel/show/card12246.html?activityid=12246",activityid:12246}],returnLayer:{imgUrl:"https://buyimg.bianxianmao.com/144/e7678403862038689680",title:"8万综合意外保障，100元滴滴红包。",buttontxt:"立即领取",linkUrl:"http://www.heiniubao.com/activity/bxmtkdd1",preid:"422"}},this.reserve={timeLayer:[{imgUrl:"http://buyimg.bianxianmao.com/dist/activeCenter/banner/waimai0815.jpg",title:"外卖0元开吃",buttontxt:"立即领取",linkUrl:"https://buyimg.bianxianmao.com/dist/awardModel/show/card12207.html?activityid=12207",activityid:12207}]},this.layerInit(this.name)}Layer.prototype={constructor:Layer,layerInit:function(i){var a=this,s=a.urlHead+a.cont;switch(i){case"time":a.layerRest();d={activityid:a.acid,appos:a.appos,appkey:a.appkey,business:a.business,uid:a.uid,i:a.di,f:a.df,ua:a.ua,modelname:"次数为0统计",modeltype:15};baseJs._ajax(s,d,"POST",!0,function(i){console.log("次数为0统计量")});break;case"return":Math.floor(2*Math.random());a.layerReturn(0);d={activityid:"12249",appos:a.appos,appkey:a.appkey,business:a.business,uid:a.uid,i:a.di,f:a.df,ua:a.ua,modelname:"首页",modeltype:3};baseJs._ajax(s,d,"POST",!0,function(i){console.log("首页曝光")});break;case"award":var s=a.urlHead+a.cont,d={activityid:"12249",appos:a.appos,appkey:a.appkey,business:a.business,uid:a.uid,i:a.di,f:a.df,ua:a.ua,modelname:"活动参与",modeltype:4};baseJs._ajax(s,d,"POST",!0,function(i){console.log("活动参与")}),a.getData()}a.bindEvent()},bindEvent:function(){var i=this;$(document).on("click",".closedialog",function(){$("#pop").remove(),$(".show-award").remove()}),$(document).on("click",".closefuli",function(){$("#pop").remove()}),$(document).on("click",".fl",function(){var a=i.urlHead+i.cont;i.getData();var s={activityid:"12249",appos:i.appos,appkey:i.appkey,business:i.business,uid:i.uid,i:i.di,f:i.df,ua:i.ua,modelname:"活动参与",modeltype:4};baseJs._ajax(a,s,"POST",!0,function(i){console.log("活动参与")})}),$(document).off("click",".popmain").on("click",".popmain",function(){var a=i.link;if(i.isclick){i.isclick=!1;var s=this,d=i.urlHead+i.cont,e={activityid:"12249",preid:$(this).data("id"),awardtype:2,appos:i.appos,appkey:i.appkey,business:i.business,uid:i.uid,i:i.di,f:i.df,ua:i.ua,modelname:"广告点击",modeltype:7};try{baseJs._ajax(d,e,"POST",!0,function(i){console.log("广告点击成功");var s=i.data;-1==a.indexOf("?")?window.location.href=a+"?bxm_id="+s:window.location.href=a+"&bxm_id="+s})}catch(i){$(s).attr("href",a)}}})},getData:function(){var i=this,a=i.urlHead+"/award/awardInfo",s={appkey:i.appkey,appos:i.appos,business:i.business,i:i.i,f:i.f,ua:i.ua,activityid:"12249",uid:i.uid};baseJs._ajax(a,s,"POST",!0,function(a){if(a.success){i.urlImg=a.data.awardimg,i.link=a.data.awardlink,i.preid=a.data.awardid,i.buttontext=a.data.buttontext,i.content=a.data.awardname,i.awardorderid=a.data.awardorderid;var s=i.urlHead+i.cont,d={activityid:"12249",preid:i.awardid,awardtype:i.preid,appos:i.appos,appkey:i.appkey,uid:i.uid,i:i.i,f:i.f,ua:i.ua,business:i.business,modelname:"活动发券",modeltype:5};baseJs._ajax(s,d,"POST",!0,function(a){console.log("活动发券成功"),i.layerDiolag()})}else console.log("服务错误！")})},layerRest:function(){var i=this;Array.prototype.replace=function(i,a){var s=this.indexOf(i);s>-1&&this.splice(s,1,a)};d=i.data.timeLayer;$.each(d,function(a,s){s.activityid==i.acid?d.replace(s,i.reserve.timeLayer[0]):console.log("没有重复")});var a="&appkey="+i.appkey+"&business="+i.business+"&uid="+i.uid+"&i="+i.di+"&f="+i.df+"&ua="+i.ua,s="",d="";s+='<div id="pop" class="show-award">',s+='<div class="pop-content">',s+='<div class="pophead"></div>',s+='<div class="popbody">',s+='<div class="list"></div>',s+='<div class="circle">',s+='<div class="circle1"></div>',s+='<div class="circle2"></div>',s+='<div class="circle3"></div>',s+="</div>",s+="</div>",s+="</div>",s+='<span class="closedialog iconfont">&#xe649;</span>',s+="</div>",$.each(i.data.timeLayer,function(i,s){d+='<a href="'+s.linkUrl+a+'">',d+='<div class="list-pic">',d+='<img src="'+s.imgUrl+'" alt="" />',d+="</div>",d+='<div class="list-title flex flex-b flex-v">',d+="<span>"+s.title+"</span>",d+="<button>"+s.buttontxt+"</button>",d+="</div>",d+="</a>"}),$("body").append(s),$("#pop").find(".list").append(d)},layerReturn:function(i){switch(i){case 0:a="";a+='<div id="pop" class="show-award">',a+='<div class="fuli fl">',a+='<div class="open"></div>',a+="</div>",a+='<span class="closefuli iconfont">&#xe649;</span>',a+="</div>",$("body").append(a);break;case 1:a="";a+='<div id="pop" class="show-award">',a+='<div class="fuli2 fl">',a+='<div class="open2"></div>',a+="</div>",a+='<span class="closefuli iconfont">&#xe649;</span>',a+="</div>",$("body").append(a);break;case 2:a="";a+='<div id="pop" class="show-award">',a+='<div class="fuli3 fl">',a+='<div class="open3"></div>',a+="</div>",a+='<span class="closefuli iconfont">&#xe649;</span>',a+="</div>",$("body").append(a);break;case 3:a="";a+='<div id="pop" class="show-award">',a+='<div class="fuli4 fl">',a+='<div class="open4"></div>',a+='<div class="bling"></div>',a+="</div>",a+='<span class="closefuli iconfont">&#xe649;</span>',a+="</div>",$("body").append(a);break;case 4:var a="";a+='<div id="pop" class="show-award">',a+='<div class="red-packet-pop">',a+='<div class="red-packet-close closedialog"></div>',a+="</div>",a+='<div class="red-packet-main">',a+='<div class="red-packet-content">',a+='<div class="open fl"></div>',a+='<div class="words"></div>',a+="</div>",a+="</div>",a+="</div>",$("body").append(a)}},layerDiolag:function(){var i=this,a='<div id="pop" class="show-award">';a+='<div class="sunshine"></div>',a+='<div class="guang"></div>',a+='<div class="popmain" data-id='+i.preid+">",a+='<div class="popaward">',a+='<img src="'+i.urlImg+'"/>',a+="</div>",a+='<div class="awardcion"></div>',a+='<div class="congratulation">',a+='<div class="c-title">'+i.content+"</div>",a+='<div class="dialogbtn flex flex-v flex-h">',a+="<span>"+i.buttontext+"</span>",a+="</div>",a+="</div>",a+="</div>",a+='<span class="closedialog iconfont">&#xe649;</span>',a+="</div>";for(var s="",d=0;d<13;d++)s+='<span class="ribbon"></span>';$("body").append(a),$(".popmain").append(s);var e={activityid:"12249",preid:i.preid,awardtype:"2",appos:i.appos,appkey:i.appkey,uid:i.uid,i:i.di,f:i.df,ua:i.ua,business:i.business,modelname:"券曝光",modeltype:6},t=i.urlHead+i.cont;baseJs._ajax(t,e,"POST",!0,function(i){console.log("券曝光")});var n=i.urlHead+"/award/subtracttimes",o={awardorderid:i.awardorderid,uid:i.uid};baseJs._ajax(n,o,"POST",!0,function(i){})}};